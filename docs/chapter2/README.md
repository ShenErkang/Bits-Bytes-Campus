### **第二章：链路层和局域网**

**🔐 相邻节点的数据握手艺术**

------

#### 1. 链路层概述

**📌 术语词典**

| **术语** | **定义**                       | **示例**                 |
| -------- | ------------------------------ | ------------------------ |
| 节点     | 主机或路由器的网络接口         | 路由器端口、手机WiFi模块 |
| 链路     | 相邻节点的物理/无线连接路径    | 以太网电缆、WiFi信道     |
| 帧       | 包含网络层数据报的链路层数据包 | 首部 + 数据 + CRC校验    |



**🔵 帧结构解析**

plaintext

保存复制

1

前同步码 | 帧开始定界符 | 目的MAC | 源MAC | 类型 | 数据 | CRC校验码  

------

#### 2. 差错检测

**📌 CRC校验必要性**

> *“比特级的守护者”* ：CRC确保帧传输完整性，检测噪声导致的比特翻转。 

**🛠 CRC计算实战**

- **输入数据** ：`1100101`

- **生成多项式** ：`x³ + x + 1 → 二进制1011`

- 计算步骤 

  ：

  1. 数据扩展：`1100101 → 1100101000`
  2. 模2除法：`1100101000 ÷ 1011 → 余数010`
  3. **附加冗余码** ：`1100101010`

**📊 校验方法对比**

| **方法** | **检测能力** | **计算复杂度** |
| -------- | ------------ | -------------- |
| 奇偶校验 | 单比特错误   | 简单           |
| CRC      | 多比特错误   | 中等           |



------

#### 3. 广播信道与多接入协议

**📌 碰撞域管理**

> *“共享信道的秩序”* ：多接入协议解决信道争用，避免数据冲突。 

**📊 协议分类矩阵**

| **协议类型** | **代表协议** | **适用场景** | **效率评分** |
| ------------ | ------------ | ------------ | ------------ |
| 信道划分     | TDMA/FDMA    | 卫星通信     | 70%          |
| 随机接入     | CSMA/CD      | 以太网       | 85%          |
| 受控接入     | 令牌环       | 工业控制网络 | 65%          |



**🛠 CSMA/CD流程模拟**

监听信道 → 空闲时发送 → 碰撞检测 → 退避重发  

#### 4. 链路层寻址与以太网

**📌 MAC地址规范**

- **格式** ：`48位十六进制`（如`00:1A:4B:FF:C3:DD`）
- **唯一性** ：烧录在NIC ROM中，全球唯一分配 ✅

**🔵 ARP协议流程**

1. 主机A查询主机B的MAC：发送`ARP请求`广播
2. 主机B回复`ARP应答` → A更新ARP表
3. 后续通信使用缓存MAC地址

**🛠 以太网帧字段详解**

目的地址（6B） | 源地址（6B） | 类型（2B） | 数据（可变） | CRC（4B）  

#### 5. 交换机与虚拟局域网

**📌 VLAN逻辑隔离**

> *“广播域的隐形墙”* ：VLAN通过标记限制广播范围，提升安全性与性能。 

**🛠 VLAN配置实验**

# 交换机配置步骤  
1. 创建VLAN10：  
   switch> vlan create 10  
2. 分配端口1-4至VLAN10：  
   switch(config)> port 1-4 assign vlan10  
3. 验证配置：  
   switch> show vlan → VLAN10: Ports 1-4  

**🔵 VLAN标记帧结构**

标准以太网帧 + VLAN标记（4B） → 指明所属VLAN  

**💻 章节测试题**
**Q1** ：MAC地址`00:1A:4B:FF:C3:DD`是否符合规范？
答案：是 ✅（48位十六进制格式）

**Q2** ：CRC校验码的作用是什么？
答案：检测帧传输中的比特错误 ✅

**Q3** ：CSMA/CD协议在检测碰撞后如何恢复？
答案：退避随机时间后重发 ✅
