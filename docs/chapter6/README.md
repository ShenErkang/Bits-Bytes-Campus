### **第六章：应用层**

**🌐 应用之门：从域名到社交网络的协议世界**

------

#### 1. 域名系统 DNS

**📌 域名解析流程**

主机 → 本地DNS → 根DNS → 顶级DNS → 权限DNS → 返回IP  

**🛠 递归 vs 迭代查询**

| **类型** | **主机参与度** | **服务器负载** |
| -------- | -------------- | -------------- |
| 递归查询 | 低（全委派）   | 本地DNS高      |
| 迭代查询 | 高（逐步引导） | 分布式负载     |



------

#### 2. 文件传送协议

**📊 FTP vs TFTP对比**

| **特性** | **FTP** | **TFTP** |
| -------- | ------- | -------- |
| 协议基础 | TCP     | UDP      |
| 交互支持 | 是      | 否       |
| 差错处理 | 依赖TCP | 自有机制 |

**🔵 FTP双连接机制**
控制连接：`持久TCP会话`
数据连接：`按需建立传输`

------

#### 3. HTTP协议深度

**📌 HTTP报文结构**

- **请求报文** ：

  GET /index.html HTTP/1.1  
  Host: example.com  

- **响应报文** ：

  HTTP/1.1 200 OK  
  Content-Type: text/html

**📊 持续连接优化**
流水线模式：多发请求少等待 → 减少RTT ✅

------

#### 4. 电子邮件体系

**🛠 SMTP会话阶段**

1. 连接建立：`EHLO命令`
2. 邮件传送：`DATA主体`
3. 连接释放：`QUIT命令`

**📌 MIME编码案例**
非ASCII附件 → Base64编码 → 邮件主体兼容传输

------

#### 5. P2P应用革新

**📌 BitTorrent策略**

- **最稀有的优先** ：加速稀缺块传播
- **数据率优先** ：奖励贡献带宽用户

**🛠 DHT查找示例（Chord算法）**
资源名哈希 → 环形覆盖网 → 指针表跳转查找 ✅

------

**💻 章节测试题**
**Q1** ：DNS递归查询中主机如何获得结果？
答案：本地DNS返回最终IP ✅

**Q2** ：HTTP流水线模式优点是什么？
答案：减少往返时延 ✅

